import{b as R,c,d as P,e as F,h as T,i as M,l as k,s as N,u as q}from"./chunk-TXYUXBBY.js";import{B as x,Ba as y,Ca as S,F as m,Fa as E,I as u,L as d,P as n,Q as i,R as l,V as C,W as f,Y as s,Z as _,fa as b,oa as h,sa as w,x as a,y as g}from"./chunk-P2CVXROA.js";var v=(t,r)=>({"border-red-500":t,"border-gray-300":r});function G(t,r){if(t&1&&(n(0,"div",6)(1,"div",23)(2,"div",24),l(3,"i",25),i(),n(4,"div",26)(5,"p",27),s(6),i()()()()),t&2){let o=f();a(6),_(o.errorMessage)}}function j(t,r){t&1&&s(0," Email is required ")}function B(t,r){t&1&&s(0," Please enter a valid email address ")}function D(t,r){if(t&1&&(n(0,"p",13),l(1,"i",28),m(2,j,1,0)(3,B,1,0),i()),t&2){let o=f();a(2),d(o.f.email.errors.required?2:-1),a(),d(o.f.email.errors.email?3:-1)}}function I(t,r){t&1&&s(0," Password is required ")}function L(t,r){t&1&&s(0," Password must be at least 6 characters ")}function V(t,r){if(t&1&&(n(0,"p",13),l(1,"i",28),m(2,I,1,0)(3,L,1,0),i()),t&2){let o=f();a(2),d(o.f.password.errors.required?2:-1),a(),d(o.f.password.errors.minlength?3:-1)}}function J(t,r){t&1&&s(0," Please confirm your password ")}function O(t,r){t&1&&s(0," Passwords do not match ")}function z(t,r){if(t&1&&(n(0,"p",13),l(1,"i",28),m(2,J,1,0)(3,O,1,0),i()),t&2){let o=f();a(2),d(o.f.confirmPassword.errors.required?2:-1),a(),d(o.f.confirmPassword.errors.matching?3:-1)}}function H(t,r){t&1&&(l(0,"i",29),s(1," Creating Account... "))}function K(t,r){t&1&&(l(0,"i",30),s(1," Register "))}var A=class t{constructor(r,o,e){this.formBuilder=r;this.router=o;this.authService=e;this.registerForm=this.formBuilder.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",[c.required]]},{validators:this.passwordMatchValidator})}registerForm;loading=!1;submitted=!1;errorMessage="";get f(){return this.registerForm.controls}passwordMatchValidator(r){let o=r.get("password"),e=r.get("confirmPassword");if(o?.value!==e?.value)e?.setErrors({matching:!0});else{let p=e?.errors;p&&(delete p.matching,e?.setErrors(Object.keys(p).length===0?null:p))}}onSubmit(){if(this.submitted=!0,this.errorMessage="",this.registerForm.invalid)return;this.loading=!0;let{email:r,password:o}=this.registerForm.value;this.authService.register(r,o).subscribe({next:()=>{this.authService.login(r,o).subscribe({next:()=>{this.router.navigate(["/resumes"])},error:e=>{this.errorMessage="Login failed after registration. Please try logging in manually.",this.loading=!1,console.error("Login error:",e)}})},error:e=>{e.status===400?this.errorMessage="Email already registered":this.errorMessage="Registration failed. Please try again.",this.loading=!1,console.error("Registration error:",e)}})}static \u0275fac=function(o){return new(o||t)(g(N),g(y),g(E))};static \u0275cmp=x({type:t,selectors:[["app-register"]],decls:43,vars:19,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-50","py-12","px-4","sm:px-6","lg:px-8","flex","items-center"],[1,"max-w-md","w-full","mx-auto","space-y-8"],[1,"text-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"bg-white","py-8","px-4","shadow-xl","sm:rounded-xl","sm:px-10","space-y-6"],[1,"bg-red-50","border-l-4","border-red-500","p-4","rounded-lg"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","relative","rounded-md","shadow-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-envelope","text-gray-400"],["type","email","id","email","formControlName","email","placeholder","you@example.com",1,"block","w-full","pl-10","pr-3","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],[1,"mt-2","text-sm","text-red-600","flex","items-center","gap-1"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],[1,"fas","fa-lock","text-gray-400"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"block","w-full","pl-10","pr-3","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"block","w-full","pl-10","pr-3","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngClass"],["type","submit",1,"w-full","flex","justify-center","items-center","gap-2","py-3","px-4","border","border-transparent","rounded-lg","shadow-sm","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],[1,"text-sm","text-center"],[1,"text-gray-600"],["routerLink","/login",1,"ml-1","font-medium","text-blue-600","hover:text-blue-500","hover:underline"],[1,"flex"],[1,"flex-shrink-0"],[1,"fas","fa-exclamation-circle","text-red-500"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-user-plus"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Create Account"),i(),n(5,"p",4),s(6," Join us to create and manage your professional resumes "),i()(),n(7,"div",5),m(8,G,7,1,"div",6),n(9,"form",7),C("ngSubmit",function(){return e.onSubmit()}),n(10,"div")(11,"label",8),s(12," Email address "),i(),n(13,"div",9)(14,"div",10),l(15,"i",11),i(),l(16,"input",12),i(),m(17,D,4,2,"p",13),i(),n(18,"div")(19,"label",14),s(20," Password "),i(),n(21,"div",9)(22,"div",10),l(23,"i",15),i(),l(24,"input",16),i(),m(25,V,4,2,"p",13),i(),n(26,"div")(27,"label",17),s(28," Confirm Password "),i(),n(29,"div",9)(30,"div",10),l(31,"i",15),i(),l(32,"input",18),i(),m(33,z,4,2,"p",13),i(),n(34,"div")(35,"button",19),m(36,H,2,0)(37,K,2,0),i()()(),n(38,"div",20)(39,"span",21),s(40,"Already have an account?"),i(),n(41,"a",22),s(42," Sign in instead "),i()()()()()),o&2&&(a(8),d(e.errorMessage?8:-1),a(),u("formGroup",e.registerForm),a(7),u("ngClass",b(10,v,e.submitted&&e.f.email.errors,!e.submitted||!e.f.email.errors)),a(),d(e.submitted&&e.f.email.errors?17:-1),a(7),u("ngClass",b(13,v,e.submitted&&e.f.password.errors,!e.submitted||!e.f.password.errors)),a(),d(e.submitted&&e.f.password.errors?25:-1),a(7),u("ngClass",b(16,v,e.submitted&&e.f.confirmPassword.errors,!e.submitted||!e.f.confirmPassword.errors)),a(),d(e.submitted&&e.f.confirmPassword.errors?33:-1),a(2),u("disabled",e.loading),a(),d(e.loading?36:37))},dependencies:[w,h,S,q,T,R,P,F,M,k],encapsulation:2})};export{A as RegisterComponent};
