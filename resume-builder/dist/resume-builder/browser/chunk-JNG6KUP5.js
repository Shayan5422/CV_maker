import{a as D}from"./chunk-VF2LBLXJ.js";import{B as k,Ba as j,F as w,I as C,J as x,K as S,L as g,M as E,N as b,O as v,P as i,Q as r,R as a,U as f,V as c,W as m,Y as s,Z as _,_ as R,c as T,da as L,ga as I,ha as P,r as u,ra as F,s as p,sa as V,x as l,y}from"./chunk-P2CVXROA.js";var $=(n,t)=>t.id,N=()=>[1,2,3];function O(n,t){if(n&1&&(i(0,"div",8),a(1,"i",13),i(2,"p",14),s(3),r()()),n&2){let e=m();l(3),_(e.error)}}function U(n,t){n&1&&(i(0,"div",9),a(1,"div",15),i(2,"p",16),s(3,"Loading resumes..."),r()())}function A(n,t){if(n&1){let e=f();i(0,"div",10)(1,"div",17)(2,"div",18),a(3,"i",4),r(),i(4,"div")(5,"h3",19),s(6,"No Resumes Yet"),r(),i(7,"p",20),s(8,"Get started by creating your first resume"),r()(),i(9,"button",21),c("click",function(){u(e);let d=m();return p(d.createNew())}),a(10,"i",7),s(11," Create Your First Resume "),r()()()}}function B(n,t){if(n&1&&a(0,"div",46),n&2){let e=m().$implicit;x("background-color",e.colors.text+"20")}}function W(n,t){if(n&1){let e=f();i(0,"div",33),c("click",function(){let d=u(e).$implicit,h=m(2);return p(h.selectThemeAndDownload(d.id))}),i(1,"div",34)(2,"div",35),a(3,"div",36),i(4,"div",37),a(5,"div",38)(6,"div",39),i(7,"div",40),b(8,B,1,2,"div",41,E),r()()(),i(10,"div",42)(11,"div",43),s(12," Select Theme "),r()()(),i(13,"div",44)(14,"h3",45),s(15),r()()()}if(n&2){let e=t.$implicit,o=m(2);l(),x("border-color",o.selectedThemeId===e.id?e.colors.primary:""),S("border-blue-500",o.selectedThemeId===e.id)("shadow-lg",o.selectedThemeId===e.id),l(),x("background-color",e.colors.background),l(),x("background-color",e.colors.primary),l(2),x("background-color",e.colors.secondary),l(),x("background-color",e.colors.accent),l(2),v(L(15,N)),l(7),_(e.name)}}function Y(n,t){if(n&1){let e=f();i(0,"div",11)(1,"div",22)(2,"div",23)(3,"div",24)(4,"h2",25),s(5,"Select Resume Theme"),r(),i(6,"button",26),c("click",function(){u(e);let d=m();return p(d.closeThemeModal())}),a(7,"i",27),r()()(),i(8,"div",28),b(9,W,16,16,"div",29,$),r(),i(11,"div",30)(12,"button",31),c("click",function(){u(e);let d=m();return p(d.closeThemeModal())}),s(13," Cancel "),r(),i(14,"button",32),c("click",function(){u(e);let d=m();return p(d.downloadWithTheme())}),s(15," Download PDF "),r()()()()}if(n&2){let e=m();l(9),v(e.themes),l(5),x("background-color",e.selectedTheme?e.selectedTheme.colors.primary:"")("border-color",e.selectedTheme?e.selectedTheme.colors.secondary:""),C("disabled",!e.selectedThemeId)}}function z(n,t){if(n&1&&(i(0,"span",51),a(1,"i",63),s(2),I(3,"date"),r()),n&2){let e=m().$implicit;l(2),R(" ",P(3,1,e.updated_at,"short")," ")}}function G(n,t){if(n&1){let e=f();i(0,"div",47)(1,"div",48)(2,"div",49)(3,"h3",50),s(4),r(),w(5,z,4,4,"span",51),r()(),i(6,"div",52)(7,"div",53),a(8,"i",54),i(9,"span"),s(10),r()(),i(11,"div",53),a(12,"i",55),i(13,"span"),s(14),r()()(),i(15,"div",56)(16,"button",57),c("click",function(){let d=u(e).$implicit,h=m(2);return p(h.editResume(d.id))}),a(17,"i",58),s(18," Edit "),r(),i(19,"button",59),c("click",function(){let d=u(e).$implicit,h=m(2);return p(h.openThemeModal(d))}),a(20,"i",60),s(21," PDF "),r(),i(22,"button",61),c("click",function(){let d=u(e).$implicit,h=m(2);return p(h.deleteResume(d.id))}),a(23,"i",62),r()()()}if(n&2){let e=t.$implicit;l(3),C("title",e.title),l(),R(" ",e.title," "),l(),g(e.updated_at?5:-1),l(5),_(e.full_name),l(4),_(e.email)}}function q(n,t){if(n&1&&(i(0,"div",12),b(1,G,24,5,"div",47,$),r()),n&2){let e=m();l(),v(e.resumes)}}var M=class n{constructor(t,e){this.resumeService=t;this.router=e;this.themes=this.resumeService.getThemes()}resumes=[];loading=!1;error="";showThemeModal=!1;selectedThemeId=null;selectedResume=null;themes=[];ngOnInit(){this.loadResumes()}get selectedTheme(){return this.themes.find(t=>t.id===this.selectedThemeId)}loadResumes(){this.loading||(this.loading=!0,this.error="",this.resumeService.getResumes().subscribe({next:t=>{this.resumes=t,this.loading=!1},error:t=>{if(t.status===401){this.loading=!1;return}this.error="Failed to load resumes. Please try again later.",console.error("Error loading resumes:",t),this.loading=!1}}))}createNew(){this.router.navigate(["/resumes/new"])}editResume(t){t&&this.router.navigate(["/resumes/edit",t])}openThemeModal(t){this.selectedResume=t,this.showThemeModal=!0}closeThemeModal(){this.showThemeModal=!1,this.selectedThemeId=null,this.selectedResume=null}selectThemeAndDownload(t){this.selectedThemeId=t}downloadWithTheme(){this.selectedThemeId&&this.selectedResume?.id&&this.resumeService.downloadResumePDF(this.selectedResume.id,this.selectedThemeId).subscribe({next:t=>{let e=window.URL.createObjectURL(t),o=document.createElement("a");o.href=e,o.download=`${this.selectedResume?.title.replace(/\s+/g,"_")}_${this.selectedThemeId}.pdf`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(e),this.closeThemeModal()},error:t=>{console.error("Error downloading PDF:",t),this.error="Failed to download PDF. Please try again.",this.closeThemeModal()}})}deleteResume(t){return T(this,null,function*(){t&&(yield this.confirmDelete())&&(this.loading=!0,this.resumeService.deleteResume(t).subscribe({next:()=>{this.resumes=this.resumes.filter(e=>e.id!==t),this.loading=!1},error:e=>{this.error="Failed to delete resume. Please try again.",console.error("Error deleting resume:",e),this.loading=!1}}))})}confirmDelete(){return new Promise(t=>{let e=window.confirm("Are you sure you want to delete this resume?");t(e)})}static \u0275fac=function(e){return new(e||n)(y(D),y(j))};static \u0275cmp=k({type:n,selectors:[["app-resume-list"]],decls:15,vars:5,consts:[[1,"min-h-screen","bg-gray-50","py-8","px-4","sm:px-6","lg:px-8"],[1,"max-w-7xl","mx-auto"],[1,"flex","justify-between","items-center","mb-8"],[1,"flex","items-center","gap-3"],[1,"fas","fa-file-alt","text-2xl","text-blue-600"],[1,"text-2xl","font-bold","text-gray-900"],[1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm",3,"click"],[1,"fas","fa-plus"],[1,"mb-6","p-4","bg-red-50","border-l-4","border-red-500","rounded-lg","flex","items-center","gap-3"],[1,"flex","flex-col","items-center","justify-center","py-12","space-y-4"],[1,"bg-white","rounded-xl","shadow-sm","p-12","text-center"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-50","flex","items-center","justify-center","p-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"fas","fa-exclamation-circle","text-red-500","text-xl"],[1,"text-red-700"],[1,"w-12","h-12","border-4","border-blue-200","border-t-blue-600","rounded-full","animate-spin"],[1,"text-gray-600"],[1,"max-w-sm","mx-auto","space-y-6"],[1,"w-16","h-16","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-2","text-gray-600"],[1,"inline-flex","items-center","gap-2","px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors",3,"click"],[1,"bg-white","rounded-xl","shadow-xl","max-w-3xl","w-full","max-h-[90vh]","overflow-y-auto"],[1,"p-6","border-b","border-gray-100"],[1,"flex","justify-between","items-center"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-gray-400","hover:text-gray-500",3,"click"],[1,"fas","fa-times","text-xl"],[1,"p-6","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"group","cursor-pointer"],[1,"p-6","border-t","border-gray-100","flex","justify-end","gap-3"],[1,"px-4","py-2","text-gray-700","bg-white","border","border-gray-200","rounded-lg","hover:bg-gray-50",3,"click"],[1,"px-4","py-2","text-white","rounded-lg","shadow-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"group","cursor-pointer",3,"click"],[1,"relative","aspect-[3/4]","rounded-lg","overflow-hidden","border-2","transition-all","duration-200"],[1,"absolute","inset-0","bg-gradient-to-br"],[1,"h-1/4"],[1,"p-4"],[1,"w-1/2","h-4","rounded"],[1,"mt-2","w-3/4","h-3","rounded"],[1,"mt-4","space-y-2"],[1,"w-full","h-2","rounded",3,"backgroundColor"],[1,"absolute","inset-0","bg-black","bg-opacity-0","group-hover:bg-opacity-10","transition-all","duration-200","flex","items-center","justify-center"],[1,"bg-white","text-gray-900","px-4","py-2","rounded-full","shadow-lg","opacity-0","group-hover:opacity-100","transform","translate-y-2","group-hover:translate-y-0","transition-all","duration-200"],[1,"mt-3","text-center"],[1,"font-medium","text-gray-900"],[1,"w-full","h-2","rounded"],[1,"bg-white","rounded-xl","shadow-sm","overflow-hidden","hover:shadow-md","transition-all","duration-200","transform","hover:-translate-y-1"],[1,"p-6","bg-gray-50","border-b","border-gray-100"],[1,"flex","justify-between","items-start"],[1,"font-medium","text-gray-900","truncate",3,"title"],[1,"text-xs","text-gray-500","flex","items-center","gap-1"],[1,"p-6","space-y-3"],[1,"flex","items-center","gap-2","text-gray-600"],[1,"fas","fa-user","text-gray-400"],[1,"fas","fa-envelope","text-gray-400"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-100","flex","gap-3"],[1,"flex-1","inline-flex","items-center","justify-center","gap-2","px-4","py-2","text-sm","text-gray-700","bg-white","border","border-gray-200","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],[1,"fas","fa-edit"],[1,"flex-1","inline-flex","items-center","justify-center","gap-2","px-4","py-2","text-sm","text-blue-600","bg-white","border","border-gray-200","rounded-lg","hover:bg-blue-50","transition-colors",3,"click"],[1,"fas","fa-download"],[1,"inline-flex","items-center","justify-center","gap-2","px-4","py-2","text-sm","text-red-600","bg-white","border","border-gray-200","rounded-lg","hover:bg-red-50","transition-colors",3,"click"],[1,"fas","fa-trash"],[1,"fas","fa-clock"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a(4,"i",4),i(5,"h1",5),s(6,"My Resumes"),r()(),i(7,"button",6),c("click",function(){return o.createNew()}),a(8,"i",7),s(9," Create New Resume "),r()(),w(10,O,4,1,"div",8)(11,U,4,0,"div",9)(12,A,12,0,"div",10)(13,Y,16,5,"div",11)(14,q,3,0,"div",12),r()()),e&2&&(l(10),g(o.error?10:-1),l(),g(o.loading?11:-1),l(),g(!o.loading&&o.resumes.length===0?12:-1),l(),g(o.showThemeModal?13:-1),l(),g(!o.loading&&o.resumes.length>0?14:-1))},dependencies:[V,F],encapsulation:2})};export{M as ResumeListComponent};
