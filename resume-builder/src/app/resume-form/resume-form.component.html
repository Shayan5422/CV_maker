<!-- src/app/resume-form/resume-form.component.html -->
<div class="resume-form-container">
    <div class="resume-form-card">
      <h2>{{ isEditing ? 'Edit Resume' : 'Create New Resume' }}</h2>
      <form [formGroup]="resumeForm" (ngSubmit)="onSubmit()">
        <!-- Basic Information -->
        <div class="form-section">
          <h3>Basic Information</h3>
          <div class="form-group">
            <label for="title">Resume Title</label>
            <input type="text" id="title" formControlName="title" [class.is-invalid]="submitted && f['title'].errors">
            <div class="invalid-feedback" *ngIf="submitted && f['title'].errors">
              <span *ngIf="f['title'].errors?.['required']">Title is required.</span>
            </div>
          </div>
  
          <div class="form-group">
            <label for="full_name">Full Name</label>
            <input type="text" id="full_name" formControlName="full_name" [class.is-invalid]="submitted && f['full_name'].errors">
            <div class="invalid-feedback" *ngIf="submitted && f['full_name'].errors">
              <span *ngIf="f['full_name'].errors?.['required']">Full Name is required.</span>
            </div>
          </div>
  
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" formControlName="email" [class.is-invalid]="submitted && f['email'].errors">
            <div class="invalid-feedback" *ngIf="submitted && f['email'].errors">
              <span *ngIf="f['email'].errors?.['required']">Email is required.</span>
              <span *ngIf="f['email'].errors?.['email']">Please enter a valid email.</span>
            </div>
          </div>
  
          <div class="form-group">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" formControlName="phone" [class.is-invalid]="submitted && f['phone'].errors">
            <div class="invalid-feedback" *ngIf="submitted && f['phone'].errors">
              <span *ngIf="f['phone'].errors?.['required']">Phone number is required.</span>
              <span *ngIf="f['phone'].errors?.['pattern']">Please enter a valid phone number.</span>
            </div>
          </div>
  
          <div class="form-group">
            <label for="summary">Professional Summary</label>
            <textarea id="summary" rows="4" formControlName="summary" [class.is-invalid]="submitted && f['summary'].errors"></textarea>
            <div class="invalid-feedback" *ngIf="submitted && f['summary'].errors">
              <span *ngIf="f['summary'].errors?.['required']">Summary is required.</span>
            </div>
          </div>
        </div>
  
        <!-- Experience Section -->
        <div class="form-section">
          <h3>Experience</h3>
          <div formArrayName="experience">
            <div *ngFor="let exp of experienceArray.controls; let i = index" [formGroupName]="i" class="array-section">
              <div class="form-group">
                <label for="company-{{i}}">Company</label>
                <input type="text" id="company-{{i}}" formControlName="company" [class.is-invalid]="submitted && exp.get('company')?.errors">
                <div class="invalid-feedback" *ngIf="submitted && exp.get('company')?.errors">
                  <span *ngIf="exp.get('company')?.errors?.['required']">Company is required.</span>
                </div>
              </div>
              <div class="form-group">
                <label for="position-{{i}}">Position</label>
                <input type="text" id="position-{{i}}" formControlName="position" [class.is-invalid]="submitted && exp.get('position')?.errors">
                <div class="invalid-feedback" *ngIf="submitted && exp.get('position')?.errors">
                  <span *ngIf="exp.get('position')?.errors?.['required']">Position is required.</span>
                </div>
              </div>
              <div class="form-group dates-group">
                <div>
                  <label for="start_date-{{i}}">Start Date</label>
                  <input type="date" id="start_date-{{i}}" formControlName="start_date" [class.is-invalid]="submitted && exp.get('start_date')?.errors">
                  <div class="invalid-feedback" *ngIf="submitted && exp.get('start_date')?.errors">
                    <span *ngIf="exp.get('start_date')?.errors?.['required']">Start date is required.</span>
                  </div>
                </div>
                <div>
                  <label for="end_date-{{i}}">End Date</label>
                  <input type="date" id="end_date-{{i}}" formControlName="end_date" [class.is-invalid]="submitted && exp.get('end_date')?.errors">
                  <div class="invalid-feedback" *ngIf="submitted && exp.get('end_date')?.errors">
                    <span *ngIf="exp.get('end_date')?.errors?.['required']">End date is required.</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="description-{{i}}">Description</label>
                <textarea id="description-{{i}}" rows="3" formControlName="description" [class.is-invalid]="submitted && exp.get('description')?.errors"></textarea>
                <div class="invalid-feedback" *ngIf="submitted && exp.get('description')?.errors">
                  <span *ngIf="exp.get('description')?.errors?.['required']">Description is required.</span>
                </div>
              </div>
              <button type="button" class="btn btn-secondary btn-remove" (click)="removeExperience(i)">Remove Experience</button>
            </div>
          </div>
          <button type="button" class="btn btn-primary" (click)="addExperience()">Add Experience</button>
        </div>
  
        <!-- Education Section -->
        <div class="form-section">
          <h3>Education</h3>
          <div formArrayName="education">
            <div *ngFor="let edu of educationArray.controls; let j = index" [formGroupName]="j" class="array-section">
              <div class="form-group">
                <label for="institution-{{j}}">Institution</label>
                <input type="text" id="institution-{{j}}" formControlName="institution" [class.is-invalid]="submitted && edu.get('institution')?.errors">
                <div class="invalid-feedback" *ngIf="submitted && edu.get('institution')?.errors">
                  <span *ngIf="edu.get('institution')?.errors?.['required']">Institution is required.</span>
                </div>
              </div>
              <div class="form-group">
                <label for="degree-{{j}}">Degree</label>
                <input type="text" id="degree-{{j}}" formControlName="degree" [class.is-invalid]="submitted && edu.get('degree')?.errors">
                <div class="invalid-feedback" *ngIf="submitted && edu.get('degree')?.errors">
                  <span *ngIf="edu.get('degree')?.errors?.['required']">Degree is required.</span>
                </div>
              </div>
              <div class="form-group dates-group">
                <div>
                  <label for="edu-start_date-{{j}}">Start Date</label>
                  <input type="date" id="edu-start_date-{{j}}" formControlName="start_date" [class.is-invalid]="submitted && edu.get('start_date')?.errors">
                  <div class="invalid-feedback" *ngIf="submitted && edu.get('start_date')?.errors">
                    <span *ngIf="edu.get('start_date')?.errors?.['required']">Start date is required.</span>
                  </div>
                </div>
                <div>
                  <label for="edu-end_date-{{j}}">End Date</label>
                  <input type="date" id="edu-end_date-{{j}}" formControlName="end_date" [class.is-invalid]="submitted && edu.get('end_date')?.errors">
                  <div class="invalid-feedback" *ngIf="submitted && edu.get('end_date')?.errors">
                    <span *ngIf="edu.get('end_date')?.errors?.['required']">End date is required.</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="edu-description-{{j}}">Description</label>
                <textarea id="edu-description-{{j}}" rows="3" formControlName="description"></textarea>
              </div>
              <button type="button" class="btn btn-secondary btn-remove" (click)="removeEducation(j)">Remove Education</button>
            </div>
          </div>
          <button type="button" class="btn btn-primary" (click)="addEducation()">Add Education</button>
        </div>
  
        <!-- Skills Section -->
        <div class="form-section">
          <h3>Skills</h3>
          <div class="form-group">
            <label for="skills">List your skills (comma-separated)</label>
            <textarea id="skills" rows="3" formControlName="skills" [class.is-invalid]="submitted && f['skills'].errors"></textarea>
            <div class="invalid-feedback" *ngIf="submitted && f['skills'].errors">
              <span *ngIf="f['skills'].errors?.['required']">Skills are required.</span>
            </div>
          </div>
        </div>
  
        <!-- Submit and Cancel Buttons -->
        <div class="button-group">
          <button type="submit" class="btn btn-primary" [disabled]="loading">
            {{ loading ? (isEditing ? 'Updating...' : 'Creating...') : (isEditing ? 'Update' : 'Create') }}
          </button>
          <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  