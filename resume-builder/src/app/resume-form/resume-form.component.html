<!-- resume-form.component.html -->
<div class="min-h-screen bg-gray-100 py-8">
    <div class="max-w-5xl mx-auto px-4">
      <!-- Main Form Card -->
      <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
        <!-- Header -->
        <div class="flex items-center gap-3 mb-8 border-b pb-4">
          <i class="fas fa-file-alt text-2xl text-blue-600"></i>
          <h1 class="text-2xl font-semibold text-gray-800">
            {{ isEditing ? 'Edit Resume' : 'Create New Resume' }}
          </h1>
        </div>
  
        <!-- Form -->
        <form [formGroup]="resumeForm" (ngSubmit)="onSubmit()" class="space-y-8">
          <!-- Basic Information -->
          <section class="space-y-6 bg-gray-50 rounded-lg p-6">
            <div class="flex items-center gap-2 border-b pb-4">
              <i class="fas fa-user text-lg text-blue-600"></i>
              <h2 class="text-xl font-medium">Basic Information</h2>
            </div>
  
            <!-- Resume Title -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Resume Title</label>
              <div class="relative rounded-md shadow-sm">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fas fa-heading text-gray-400"></i>
                </div>
                <input
                  type="text"
                  formControlName="title"
                  class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  [ngClass]="{'border-red-500': submitted && f['title'].errors}"
                  placeholder="e.g. Senior Developer Resume"
                >
                <div *ngIf="submitted && f['title'].errors" class="mt-1 text-sm text-red-600">
                  <span *ngIf="f['title'].errors['required']">Title is required</span>
                </div>
              </div>
            </div>
  
            <!-- Name -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
              <div class="relative rounded-md shadow-sm">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fas fa-user text-gray-400"></i>
                </div>
                <input
                  type="text"
                  formControlName="full_name"
                  class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  [ngClass]="{'border-red-500': submitted && f['full_name'].errors}"
                >
                <div *ngIf="submitted && f['full_name'].errors" class="mt-1 text-sm text-red-600">
                  <span *ngIf="f['full_name'].errors['required']">Full name is required</span>
                </div>
              </div>
            </div>
  
            <!-- Contact Row -->
            <div class="grid md:grid-cols-2 gap-6">
              <!-- Email -->
              <div class="form-group">
                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <div class="relative rounded-md shadow-sm">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-envelope text-gray-400"></i>
                  </div>
                  <input
                    type="email"
                    formControlName="email"
                    class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    [ngClass]="{'border-red-500': submitted && f['email'].errors}"
                  >
                  <div *ngIf="submitted && f['email'].errors" class="mt-1 text-sm text-red-600">
                    <span *ngIf="f['email'].errors['required']">Email is required</span>
                    <span *ngIf="f['email'].errors['email']">Invalid email format</span>
                  </div>
                </div>
              </div>
  
              <!-- Phone -->
              <div class="form-group">
                <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                <div class="relative rounded-md shadow-sm">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fas fa-phone text-gray-400"></i>
                  </div>
                  <input
                    type="tel"
                    formControlName="phone"
                    class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    [ngClass]="{'border-red-500': submitted && f['phone'].errors}"
                  >
                </div>
              </div>
            </div>
  
            <!-- Summary -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">Professional Summary</label>
              <textarea
                rows="4"
                formControlName="summary"
                class="block w-full px-4 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                [ngClass]="{'border-red-500': submitted && f['summary'].errors}"
              ></textarea>
            </div>
          </section>
  
          <!-- Experience Section -->
          <section formArrayName="experience" class="space-y-6 bg-gray-50 rounded-lg p-6">
            <div class="flex items-center justify-between border-b pb-4">
              <div class="flex items-center gap-2">
                <i class="fas fa-briefcase text-lg text-blue-600"></i>
                <h2 class="text-xl font-medium">Experience</h2>
              </div>
              <button type="button" 
                      (click)="addExperience()" 
                      class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700">
                <i class="fas fa-plus"></i>
                Add Experience
              </button>
            </div>
  
            <div *ngFor="let exp of experienceArray.controls; let i = index" 
                 [formGroupName]="i" 
                 class="bg-white rounded-lg shadow-sm p-6 relative">
              <!-- Remove Button -->
              <button type="button" 
                      (click)="removeExperience(i)"
                      class="absolute top-4 right-4 text-gray-400 hover:text-red-500">
                <i class="fas fa-trash-alt"></i>
              </button>
  
              <!-- Experience Form Fields -->
              <div class="grid gap-6">
                <div class="grid md:grid-cols-2 gap-6">
                  <!-- Company -->
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Company</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-building text-gray-400"></i>
                      </div>
                      <input type="text" 
                             formControlName="company"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                             [ngClass]="{'border-red-500': submitted && exp.get('company')?.errors}">
                    </div>
                  </div>
  
                  <!-- Position -->
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Position</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-id-badge text-gray-400"></i>
                      </div>
                      <input type="text" 
                             formControlName="position"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                             [ngClass]="{'border-red-500': submitted && exp.get('position')?.errors}">
                    </div>
                  </div>
                </div>
  
                <!-- Dates -->
                <div class="grid md:grid-cols-2 gap-6">
                  <!-- Start Date -->
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-calendar text-gray-400"></i>
                      </div>
                      <input type="date" 
                             formControlName="start_date"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                  </div>
  
                  <!-- End Date -->
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-calendar text-gray-400"></i>
                      </div>
                      <input type="date" 
                             formControlName="end_date"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                  </div>
                </div>
  
                <!-- Description -->
                <div class="form-group">
                  <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                  <textarea formControlName="description"
                            rows="3"
                            class="block w-full px-4 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  </textarea>
                </div>
              </div>
            </div>
          </section>
  
          <!-- Education Section -->
          <section formArrayName="education" class="space-y-6 bg-gray-50 rounded-lg p-6">
            <div class="flex items-center justify-between border-b pb-4">
              <div class="flex items-center gap-2">
                <i class="fas fa-graduation-cap text-lg text-blue-600"></i>
                <h2 class="text-xl font-medium">Education</h2>
              </div>
              <button type="button" 
                      (click)="addEducation()"
                      class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700">
                <i class="fas fa-plus"></i>
                Add Education
              </button>
            </div>
  
            <div *ngFor="let edu of educationArray.controls; let i = index"
                 [formGroupName]="i"
                 class="bg-white rounded-lg shadow-sm p-6 relative">
              <!-- Remove Button -->
              <button type="button"
                      (click)="removeEducation(i)"
                      class="absolute top-4 right-4 text-gray-400 hover:text-red-500">
                <i class="fas fa-trash-alt"></i>
              </button>
  
              <!-- Education Form Fields -->
              <div class="grid gap-6">
                <!-- Institution & Degree -->
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Institution</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-university text-gray-400"></i>
                      </div>
                      <input type="text"
                             formControlName="institution"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                  </div>
  
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Degree</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-scroll text-gray-400"></i>
                      </div>
                      <input type="text"
                             formControlName="degree"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                  </div>
                </div>
  
                <!-- Dates -->
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-calendar text-gray-400"></i>
                      </div>
                      <input type="date"
                             formControlName="start_date"
                             class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                  </div>
  
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-calendar text-gray-400"></i>
                          </div>
                          <input type="date"
                                 formControlName="end_date"
                                 class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                      </div>
                    </div>
      
                    <!-- Description -->
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                      <textarea formControlName="description"
                               rows="3"
                               class="block w-full px-4 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </textarea>
                    </div>
                  </div>
                </div>
              </section>
      
              <!-- Skills Section -->
              <section formArrayName="skills" class="space-y-6 bg-gray-50 rounded-lg p-6">
                <div class="flex items-center justify-between border-b pb-4">
                  <div class="flex items-center gap-2">
                    <i class="fas fa-tools text-lg text-blue-600"></i>
                    <h2 class="text-xl font-medium">Skills</h2>
                  </div>
                  <button type="button" 
                          (click)="addSkill()"
                          class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700">
                    <i class="fas fa-plus"></i>
                    Add Skill
                  </button>
                </div>
      
                <div *ngFor="let skill of skillsArray.controls; let i = index"
                     [formGroupName]="i"
                     class="bg-white rounded-lg shadow-sm p-6 relative">
                  <!-- Remove Button -->
                  <button type="button"
                          (click)="removeSkill(i)"
                          class="absolute top-4 right-4 text-gray-400 hover:text-red-500">
                    <i class="fas fa-trash-alt"></i>
                  </button>
      
                  <!-- Skill Form Fields -->
                  <div class="grid md:grid-cols-2 gap-6">
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Skill Name</label>
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-star text-gray-400"></i>
                        </div>
                        <input type="text"
                               formControlName="skill"
                               class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
      
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Proficiency</label>
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-chart-bar text-gray-400"></i>
                        </div>
                        <select formControlName="proficiency"
                                class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                          <option value="">Select Proficiency</option>
                          <option value="Beginner">Beginner</option>
                          <option value="Intermediate">Intermediate</option>
                          <option value="Advanced">Advanced</option>
                          <option value="Expert">Expert</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
      
              <!-- Projects Section -->
              <section formArrayName="projects" class="space-y-6 bg-gray-50 rounded-lg p-6">
                <div class="flex items-center justify-between border-b pb-4">
                  <div class="flex items-center gap-2">
                    <i class="fas fa-project-diagram text-lg text-blue-600"></i>
                    <h2 class="text-xl font-medium">Projects</h2>
                  </div>
                  <button type="button" 
                          (click)="addProject()"
                          class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700">
                    <i class="fas fa-plus"></i>
                    Add Project
                  </button>
                </div>
      
                <div *ngFor="let project of projectsArray.controls; let i = index"
                     [formGroupName]="i"
                     class="bg-white rounded-lg shadow-sm p-6 relative">
                  <!-- Remove Button -->
                  <button type="button"
                          (click)="removeProject(i)"
                          class="absolute top-4 right-4 text-gray-400 hover:text-red-500">
                    <i class="fas fa-trash-alt"></i>
                  </button>
      
                  <!-- Project Form Fields -->
                  <div class="grid gap-6">
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-folder text-gray-400"></i>
                        </div>
                        <input type="text"
                               formControlName="name"
                               class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
      
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                      <textarea formControlName="description"
                               rows="3"
                               class="block w-full px-4 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </textarea>
                    </div>
      
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Project Link (Optional)</label>
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-link text-gray-400"></i>
                        </div>
                        <input type="url"
                               formControlName="link"
                               class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
                  </div>
                </div>
              </section>
      
              <!-- Certifications Section -->
              <section formArrayName="certifications" class="space-y-6 bg-gray-50 rounded-lg p-6">
                <div class="flex items-center justify-between border-b pb-4">
                  <div class="flex items-center gap-2">
                    <i class="fas fa-certificate text-lg text-blue-600"></i>
                    <h2 class="text-xl font-medium">Certifications</h2>
                  </div>
                  <button type="button" 
                          (click)="addCertification()"
                          class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700">
                    <i class="fas fa-plus"></i>
                    Add Certification
                  </button>
                </div>
      
                <div *ngFor="let cert of certificationsArray.controls; let i = index"
                     [formGroupName]="i"
                     class="bg-white rounded-lg shadow-sm p-6 relative">
                  <!-- Remove Button -->
                  <button type="button"
                          (click)="removeCertification(i)"
                          class="absolute top-4 right-4 text-gray-400 hover:text-red-500">
                    <i class="fas fa-trash-alt"></i>
                  </button>
      
                  <!-- Certification Form Fields -->
                  <div class="grid gap-6">
                    <div class="grid md:grid-cols-2 gap-6">
                      <div class="form-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Certification Name</label>
                        <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-award text-gray-400"></i>
                          </div>
                          <input type="text"
                                 formControlName="title"
                                 class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                      </div>
      
                      <div class="form-group">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Issuing Organization</label>
                        <div class="relative">
                          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-building text-gray-400"></i>
                          </div>
                          <input type="text"
                                 formControlName="issuer"
                                 class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                      </div>
                    </div>
      
                    <div class="form-group">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Date Received</label>
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-calendar-check text-gray-400"></i>
                        </div>
                        <input type="date"
                               formControlName="date"
                               class="block w-full pl-10 py-3 text-gray-700 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
                  </div>
                </div>
              </section>
      
              <!-- Form Actions -->
              <div class="flex justify-end gap-4 pt-6 border-t">
                <button type="button"
                        (click)="onCancel()"
                        class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center gap-2">
                  <i class="fas fa-times"></i>
                  Cancel
                </button>
                <button type="submit"
                        [disabled]="loading"
                        class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                  <i class="fas" [class.fa-save]="!loading" [class.fa-spinner]="loading" [class.fa-spin]="loading"></i>
                  {{ loading ? 'Saving...' : 'Save Resume' }}
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>